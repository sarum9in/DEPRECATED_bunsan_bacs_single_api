package bacs.api.pb.result;

import "resource.proto";

message Result
{
    required SystemResult system = 1;
    optional BuildResult build = 2;
    repeated TestGroupResult test_groups = 3;
}

message SystemResult
{
    enum Status
    {
        OK = 0;
        INVALID_HASH = 1;
    }
    required Status status = 1;
}

message BuildResult
{
    required Execution execution = 1;
    required bytes output = 2;
}

message Execution
{
    enum Status
    {
        OK = 0;
        ABNORMAL_EXIT = 1;
        TERMINATED_BY_SYSTEM = 2;
        MEMORY_LIMIT_EXCEEDED = 3;
        TIME_LIMIT_EXCEEDED = 4;
        OUTPUT_LIMIT_EXCEEDED = 5;
        START_FAILED = 6;
        STOPPED = 7;
        REAL_TIME_LIMIT_EXCEEDED = 8;
    }
    required Status status = 1;
    required ResourceUsage resource_usage = 3;
    optional bytes full = 4;
}

message TestGroupResult
{
    required string id = 1;
    repeated TestResult tests = 2;
}

message TestResult
{
    message Checking
    {
        enum Status
        {
            OK = 0;
            WRONG_ANSWER = 1;
            PRESENTATION_ERROR = 2;
            FAIL_TEST = 3;
        }
        required Status status = 1;
        required bytes output = 2;
    }
    message File
    {
        required string id = 1;
        required bytes data = 2;
    }
    required string id = 1;
    required Execution execution = 2;
    optional Checking checking = 3;
    repeated File files = 4;
}
